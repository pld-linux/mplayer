--- mplayer-export-2007-06-26/mencoder-on2flixenglinux/add_ogg_mux_demux.diff~	2007-04-03 17:47:41.000000000 +0300
+++ mplayer-export-2007-06-26/mencoder-on2flixenglinux/add_ogg_mux_demux.diff	2007-06-26 23:35:39.542628840 +0300
@@ -17,18 +17,16 @@
  	"   rawvideo - (video only, one stream only) raw stream, no muxing\n"
  	"   rawaudio - (audio only, one stream only) raw stream, no muxing\n"
  	"\n", CONF_TYPE_PRINT, CONF_NOCFG, 0, 0, NULL},
-Index: libmpdemux/Makefile
-===================================================================
---- libmpdemux/Makefile	(revision 22906)
-+++ libmpdemux/Makefile	(working copy)
-@@ -62,6 +62,7 @@
+--- libmpdemux/Makefile~	2007-06-26 23:34:05.680539505 +0300
++++ libmpdemux/Makefile	2007-06-26 23:35:06.021882602 +0300
+@@ -61,6 +61,7 @@
                  muxer_rawaudio.c \
                  muxer_rawvideo.c \
  
-+SRCS_MENCODER                           += muxer_ogg.c oggpcm.c ogguvs.c
- SRCS_MENCODER-$(CONFIG_LIBAVFORMAT)     += muxer_lavf.c
- SRCS_MENCODER-$(CONFIG_LIBAVFORMAT_SO)  += muxer_lavf.c
++SRCS_MENCODER                          += muxer_ogg.c oggpcm.c ogguvs.c
+ SRCS_MENCODER-$(LIBAVFORMAT)           += muxer_lavf.c
  
+ include ../mpcommon.mak
 Index: libmpdemux/muxer.c
 ===================================================================
 --- libmpdemux/muxer.c	(revision 22906)
--- mplayer-export-2007-06-26/mencoder-on2flixenglinux/add_ogg_mux_demux.diff~	2007-06-26 23:39:06.307233710 +0300
+++ mplayer-export-2007-06-26/mencoder-on2flixenglinux/add_ogg_mux_demux.diff	2007-06-26 23:39:55.148321916 +0300
@@ -72,10 +72,13 @@
    int id;
  
    vorbis_info      vi;
-@@ -190,6 +192,22 @@
- }
+--- libmpdemux/demux_ogg.c~	2007-06-26 23:36:35.963885083 +0300
++++ libmpdemux/demux_ogg.c	2007-06-26 23:37:52.535590369 +0300
+@@ -166,6 +166,22 @@
+ #define get_uint32(b) AV_RL32(b)
+ #define get_uint64(b) AV_RL64(b)
  
- static
++static
 +uint32_t get_be_uint32 (const void *buf)
 +{
 +  uint32_t      ret;
@@ -91,10 +94,11 @@
 +  return (ret);
 +}
 +
-+static
- uint64_t get_uint64 (const void *buf)
- {
-   uint64_t      ret;
+ void demux_ogg_add_sub (ogg_stream_t* os,ogg_packet* pack) {
+   int lcv;
+   char *packet = pack->packet;
+--- libmpdemux/demux_ogg.c	(revision 22906)
++++ libmpdemux/demux_ogg.c	(working copy)
 @@ -352,6 +370,42 @@
       /* we pass complete packets to flac, mustn't strip the header! */
       if (os->flac == 2 && pack->packet[0] != 0xff)
--- mplayer-export-2007-06-26/mencoder-on2flixenglinux/ve_raw_stride_support.diff~	2007-06-26 23:46:21.446934769 +0300
+++ mplayer-export-2007-06-26/mencoder-on2flixenglinux/ve_raw_stride_support.diff	2007-06-26 23:48:10.869376259 +0300
@@ -89,15 +89,17 @@
      switch (fmt) {
      case IMGFMT_I420:
      case IMGFMT_IYUV:
-@@ -111,15 +166,33 @@
+--- libmpcodecs/ve_raw.c~	2007-06-26 23:40:28.269059962 +0300
++++ libmpcodecs/ve_raw.c	2007-06-26 23:42:35.241890085 +0300
+@@ -169,6 +169,7 @@
      case IMGFMT_YUY2:
      case IMGFMT_YVU9:
      case IMGFMT_IF09:
--	return VFCAP_CSP_SUPPORTED | VFCAP_CSP_SUPPORTED_BY_HW;
 +	return supported;
+     case IMGFMT_Y8:
+ 	return VFCAP_CSP_SUPPORTED | VFCAP_CSP_SUPPORTED_BY_HW;
      }
- 
-     return 0;
+@@ -177,8 +178,26 @@
  }
  
  static int put_image(struct vf_instance_s *vf, mp_image_t *mpi, double pts) {
